Новогодние серии мультсериалов: как я собирал их все.

В этой статье я хочу рассказать с какими приключениями и трудностямии столкнулся, когда собирал мульты, и как с ними справлялся. 

[вставить картинку как в статье-оригинале]

Поговорим про работу с видео и как создать торрент-раздачу без сайтов-посредников.

(Напоминаю, что мы против пиратства и раздаём исключительно легальный контент).

Дисклеймер: я не претендую на 100% лучшие практики. Но точно будет с чего начать.

Итак, я наткнулся на эту статью и очень вдохновился:
https://dtf.ru/cinema/1475619-novogodnie-serii-multserialov

Картинку я нарочно оставил как у статьи по ссылке выше, чтобы подчеркнуть преемственность (или типа того — не могу более подходящего слова подобрать).

И задался целью найти всё это и собрать в одном месте. Отчасти just for fun, отчасти для новогоднего настроения.

И не только собрать, но и улучшить качество изображения, добавить недостающих дорожек и субтитров.

Чаще всего мультфильм можно было найти на одном небезызвестном торрент-треккере. 

Также, что меня довольно удивило, находились мульты и просто в YouTube. Ещё чуть реже в вк / одноклассниках. И самое забавное — на порно-сайтах. Иногда, когда я тупо вбивал название в гугл — ссылка вела на какой-то ресурс с голыми людьми. И там действительно был нужный мультфильм. Я так штук 5 точно нашёл, мне кажется. И даже кнопка скачать удобно встречала под видео.

Структуру файлов я сделал один в один как в статье-первоисточнике. Чтобы было проще ориентироваться.

Итак, первый шаг пройден — всё собрали.

Сложнее всего оказалось с субтитрами. Дорожки люди делают охотнее. А для таких как я — кто любит смотреть в оригинале с сабами — не всегда есть место под солнцем.

Я рыскал на разных ресурсах, и ситуация улучшалась. Но, тем не менее, прям большую часть сабов найти не удалось — их просто не существует.

И решил я создать недостающие сабы самостоятельно. Забегая вперёд — я бросил эту затею. По крайней мере на данный момент.

Задача оказалась чересчур амбициозной. Я явно недооценил объём работ! Я даже нанял человека, который мне расшифровал русские дорожки для рождественских серий Симпсонов. И когда я для теста создал русские сабы для одной серии — у меня это заняло около двух часов. На серию длинной чуть больше 20 минут! И я осознал, что если хочу успеть до новогодних праздников — то придётся это отложить.

Я хотел бы вернуться к этому позже. Не торопясь, делать пару-тройку серий в неделю. Но точно не сейчас.

С дорожками задача была интереснее. Чаще всего отдельно дорожку было не найти. И получается, что у меня были две версии мульта — одна с русской дорожкой, другая — с английской.

То есть, нужно вытащить дорожку из одного видео и «вшить» его в другое.

Здесь нас выручит замечательная утилита ffmpeg. Да, она консольная, но ничего страшного там нет.

Как всё это дело установить в интернетах очень хорошо уже разжевали. Здесь я останавливаться не буду, но для примера приведу ссылку с туториалом (не реклама):
https://blog.pruffme.com/instrukciya-po-ustanovke-i-rabote-s-programmoj-ffmpeg-na-windows/

Данной командой мы извлекаем первую дорожку из видеофайла:
ffmpeg -i <видос>.avi <аудио>.mp3

Если нужно извлечь какую-то определённую дорожку (в данном случае — третью):
ffmpeg -i <видос>.avi -map 0:a:3 -c copy <аудио>.mp3

Как узнать какие вообще дорожки у нас есть? Команда такая:
ffprobe -i <аудио>.avi

Итак, теперь у нас есть две дорожки — русская и английская. И их нужно запихнуть в один видеофайл. 

Можем воспользоваться такой командой:
ffmpeg -i <видос>.mkv -i <аудио>.mp3 -map 0 -map 1:a -c:v copy -shortest <видос_готов>.mkv

Вообще, их миллионы. Команды есть на все случаи жизни. Дополнительно их можно посмотреть здесь (очень понравились примеры):
https://stackoverflow.com/questions/9913032/how-can-i-extract-audio-from-video-with-ffmpeg

Идём дальше. Мы видим, что часто качество изображения оставляет желать лучшего. Сразу бросилось это в глаза в King of The Hill. Такое на большом экране смотреть прям затруднительно.

Здесь нас выручит программка под названием Topaz Video AI.

При открытии программа встречает нас таким приветственным окном.

Перетаскиваем сюда видео, которое мы хотим обработать.

После того как видео было открыто — обращаем внимание на правую панель.
А именно на блок с разрешением, которое мы хотим получить. Оставляем original, если ничего не хотим менять. И если хотим изменить — выбираем Custom Resolution (ну или пресеты из списка).

В моём случае я хотел добиться как минимум 720p изображения. И не потерять соотношение сторон. Для этого я отмечал галочкой пункт Lock Aspect Ratio и в следующем ниспадающем списке пункт Prioritize Height.

Далее нужно выбрать модель. Для нашего случая идеально подойдёт Iris. Показываю на скриншоте где это находится.

И параметры — Relative to Auto.

Пробуем как это будет выглядеть, нажав на кнопку Preview. Слева от неё выбираем сколько секунд хотели бы видеть в превьюшке. Я обычно выбирал 15 или 30 секунд.

Чтобы не потерять превью в списке ниже — выбираем кнопку All Outputs. Я в упор не видел эти три кнопки и поэтому иногда терялся.

И зум в 100%, чтобы сразу была видна разница.

Смотрим как преобразилось изображение.

Если результат не устроил — мы можем поиграться с параметрами выше, пока не получим нужный результат.

Упомяну, что ещё может понадобиться поменять тип видео на Interlaced. Такие видосы легко распознать по характерным полосочкам.

Quality Level рекомендую менять на medium. Разницы с high я не заметил, а вот размер файла очень сильно меняется.

Конечно, можно и до Full HD апскейлить. Но в моём случае артефактов получалось больше. От них полностью всё равно не избавиться. Поэтому необработанные версии мультов я тоже оставил. А один мультфильм мне так и не удалось привести к нормальному качеству — Скуби Ду, записанный на кассету с телевизора.

Иногда полезно применять «улучшайзеры» и без изменения исходного разрешения (например серию людей в чёрном кто-то дотянул до 1080p, при этом никак не изменив качество).

В конце концов получилось около 256 гб и 400 файлов.

Да и то — не всё удалось отыскать. Поэтому для удобства я создавал файлы missing.txt, в которых перечислял чего не хватает — дорожек, сабов, а иногда и целых эпизодов.

Объём данных получился внушительным. Что делать, если бы мы захотели поделиться таким большим количеством данных?

Первое, что приходит на ум — это создать торрент-раздачу.

Чтобы это сделать, мы воспользуемся qBitTorrent. По какой-то причине uTorrent у меня крашился постоянно — не мог переварить огромный объём информации.

Идём в Сервис → Создать торрент. 

На вкладке треккеры указываем следующие [спрятать под спойлер]:

udp://bt.rutor.org:2710

http://tracker.thepiratebay.org/announce

udp://tracker.thepiratebay.org:80/announce

udp://denis.stalker.h3q.com:6969/announce

http://denis.stalker.h3q.com:6969/announce

udp://open.demonii.com:1337

udp://open6.demonii.com:1337

udp://tracker.opentrackr.org:1337/announce

udp://tracker.cyberia.is:6969/announce 

udp://tracker.leechers-paradise.org:6969 

http://tracker.openbittorrent.com/announce

 udp://tracker.openbittorrent.com:6969 

http://tracker.torrentbay.to:6969/announce

udp://tracker.publicbt.com:80/announce

http://www.filebase.ws:5678/announce

http://exodus.desync.com/announce

http://www.progressivetorrents.com/announce.php

http://sound-park.ru/announce.php

udp://tracker.trackerfix.com:83/announce

udp://tracker.opentrackr.org:1337/announce

udp://tracker.zer0day.to:1337/announce

udp://explodie.org:6969/announce

udp://eddie4.nl:6969/announce

udp://shadowshq.yi.org:6969/announce

udp://shubt.net:2710

http://80.246.243.18:6969/announce

http://125.227.35.196:6969/announce

http://tracker.tiny-vps.com:6969/announce

http://87.248.186.252:8080/announce

http://210.244.71.25:6969/announce

http://46.4.109.148:6969/announce

http://tracker.dler.com:6969/announce

udp://tracker.dler.com:6969/announce

http://tracker2.dler.com/announce

udp://tracker2.dler.com/announce

http://tracker3.dler.com:2710/announce

udp://tracker3.dler.com:2710/announce 

Нажимаем галочку на «встать на раздачу» — готово! Получившимся торрент-файлом мы можем делиться с друзьями.

Собственно, всё! Надеюсь, было интересно и полезно. Поправьте меня, пожалуйста, в комментариях, если есть замечания.

Всем хорошего новогоднего настроения в праздники!

P.S.: По правилам DTF я не могу размещать ссылки в статье, ребятам по шапке надают
